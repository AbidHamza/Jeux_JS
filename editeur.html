<html>
  <head>
     <meta charset="UTF8" />
     <meta content="utf-8" http-equiv="encoding">
     <script src="https://d3js.org/d3.v5.min.js"></script>
     <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
     <script>
       window.addEventListener("DOMContentLoaded", (event) => {
        var submit = document.getElementById("name_new");
        submit.addEventListener("click", function(){
          var modele = savemodele(13,12)
          var nom = document.getElementById("new").value
          //var modele = [[2, 1, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1, 1],[2, 1, 0, 3, 0, 1, 1, 5, 1, 0, 0, 3, 1],[2, 1, 0, 7, 0, 1, 0, 0, 1, 0, 7, 0, 1],[2, 1, 0, 0, 0, 1, 0, 3, 1, 0, 0, 0, 1],[1, 1, 5, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1],[1, 0, 0, 7, 0, 1, 0, 0, 6, 0, 0, 0, 1],[1, 0, 7, 7, 0, 6, 0, 0, 1, 0, 0, 3, 1],[1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1],[1, 1, 1, 6, 1, 1, 0, 0, 1, 0, 3, 0, 1],[2, 2, 1, 0, 7, 1, 0, 0, 6, 0, 0, 0, 1],[2, 2, 1, 7, 3, 1, 0, 0, 1, 0, 0, 8, 1],[2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]
          $.ajax({url:"http://localhost:8888/niveau/"+nom, type:"POST", data:{data:modele}, dataType:"json"})
             // Appel du serveur pour qu'il nous envoie le modèle enrgistré dans niveau1.json
         //$.getJSON("http://localhost:8888/niveau/"+choix.value, function(data) {
             // Ouvrir la console du navigateur pour vérifier que cela fonctionne
             //genereModele(data,50, 12, 13);

        })
      });

       $().ready(function() {
       //var modele = [[2, 1, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1, 1],[2, 1, 0, 3, 0, 1, 1, 5, 1, 0, 0, 3, 1],[2, 1, 0, 7, 0, 1, 0, 0, 1, 0, 7, 0, 1],[2, 1, 0, 0, 0, 1, 0, 3, 1, 0, 0, 0, 1],[1, 1, 5, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1],[1, 0, 0, 7, 0, 1, 0, 0, 6, 0, 0, 0, 1],[1, 0, 7, 7, 0, 6, 0, 0, 1, 0, 0, 3, 1],[1, 0, 0, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1],[1, 1, 1, 6, 1, 1, 0, 0, 1, 0, 3, 0, 1],[2, 2, 1, 0, 7, 1, 0, 0, 6, 0, 0, 0, 1],[2, 2, 1, 7, 3, 1, 0, 0, 1, 0, 0, 8, 1],[2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]]
        
         // Appel du serveur pour qu'il enregistre le modèle dans un fichier
         //$.ajax({url:"http://localhost:8881/niveau/1", type:"POST", data:{data: modele}, dataType:"json"});

         
         });
       //});
      </script>
      <script src="damier.js"></script>

  </head>
  <body onLoad="genereDamier(50, 12, 13)">
    <div id="choixlvl"></div>
      <input type=text" id="new" value="enter your level name">
      <button name="level" id="name_new">Submit
      </button>
    

    </div>
    <br>
    <div id="damier"></div>
    <div id="menu" style="margin-left: 1100px; position : absolute; top : 100px"> Menu
      <button onClick="savemodele()">click to alert</button>
      <svg width="480" height="240">
        <rect x="0" y="0" width="120" height="120" style="stroke: black; fill: white;" onClick="sessionStorage.setItem('type', 'sol')"></rect>
        <rect x="120" y="0" width="120" height="120" style="stroke: black; fill: white;" onClick="sessionStorage.setItem('type', 'mur')"></rect>
        <rect x="240" y="0" width="120" height="120" style="stroke: black; fill: white;" onClick="sessionStorage.setItem('type', 'porte_verrouiller')"></rect>
        <rect x="360" y="0" width="120" height="120" style="stroke: black; fill: white;" onClick="sessionStorage.setItem('type', 'porte_ouverte')"></rect>
        <rect x="0" y="120" width="120" height="120" style="stroke: black; fill: white;" onClick="sessionStorage.setItem('type', 'vide')"></rect>
        <rect x="120" y="120" width="120" height="120" style="stroke: black; fill: white;" onClick="sessionStorage.setItem('type', 'meuble')"></rect>
        <rect x="240" y="120" width="120" height="120" style="stroke: black; fill: white;" onClick="sessionStorage.setItem('type', 'piege')"></rect>
        <rect x="360" y="120" width="120" height="120" style="stroke: black; fill: white;" onClick="sessionStorage.setItem('type', 'escaliers')"></rect>
        <image href ="images/sol.png" width="120" height="120" x="0" y=0></image>
        <image href ="images/mur.png" width="120" height="120" x="120" y="0"></image>
        <image href ="images/porte_verrouiller.png" width="120" height="120" x="240" y="0"></image>
        <image href ="images/porte_ouverte.png" width="120" height="120" x="360" y="0"></image>
        <image href ="images/vide.png" width="120" height="120"  x="0" y="120"></image>
        <image href ="images/meuble.png" width="120" height="120"  x="120" y="120"></image>
        <image href ="images/piege.png" width="120" height="120" x="240" y="120"></image>
        <image href ="images/escaliers.png" width="120" height="120" x="360" y="120"></image>
      </svg>
    </div>
  </body>
</html>